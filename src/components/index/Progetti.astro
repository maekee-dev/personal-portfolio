---
import Button1 from "@components/Button1.astro";
import Button2 from "@components/Button2.astro";
import ProgettoCard from "@components/index/ProgettoCard.astro";

import valtrighebasketballMobile from "@images/index/progetti/valtrighebasketballMobile.png";
import chiaraiencarelliMobile from "@images/index/progetti/chiaraiencarelliMobile.png";
import giovannibrambillaMobile from "@images/index/progetti/giovannibrambillaMobile.png";
import centropagnoncelliMobile from "@images/index/progetti/centropagnoncelliMobile.png";
import centrodelcoloreMobile from "@images/index/progetti/centrodelcoloreMobile.png";
import italomapelliMobile from "@images/index/progetti/italomapelliMobile.png"

import valtrighebasketball from "@images/index/progetti/valtrighebasketball.png";
import chiaraiencarelli from "@images/index/progetti/chiaraiencarelli.png";
import giovannibrambilla from "@images/index/progetti/giovannibrambilla.png";
import centropagnoncelli from "@images/index/progetti/centropagnoncelli.png";
import centrodelcolore from "@images/index/progetti/centrodelcolore.png";
import italomapelli from "@images/index/progetti/italomapelli.png"

import background1 from "@images/index/project-bg-1.png"
import background2 from "@images/index/project-bg-2.png"
import background3 from "@images/index/project-bg-3.png"
import background4 from "@images/index/project-bg-4.png"
import background5 from "@images/index/project-bg-5.png"
import background6 from "@images/index/project-bg-6.png"
---

<section class="w-full px-normal mt-56 z-20 overflow-hidden min-4xl:px-12 max-w-[1920px] max-md:overflow-auto max-md:px-0 max-lg:mt-36">
    <div data-progetti-wrap class="w-full">
        <div class="w-full flex items-end justify-between gap-4 max-md:flex-col max-md:items-start max-md:px-normal">
            <div class="max-w-[475px] flex flex-col gap-4 max-lg:max-w-[350px] max-lg:gap-2">
                <h2 class="text-5xl font-regular font-robit max-lg:text-4xl">
                    Qualche 
                    <span data-progetti-title class="font-medium relative">
                        progetto
                    </span>
                </h2>
                <p class="text-gray/80">Offro un servizio completo dalla A alla Z per creare o migliorare la tua presenza in rete.</p>
            </div>
            <div class="flex items-center text-gray/40 max-md:flex-row-reverse max-md:w-full max-md:justify-between">
                <div class="max-lg:hidden max-md:flex flex items-center">
                    <svg data-testid="geist-icon" height="16" stroke-linejoin="round" style="color:currentColor" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.8536 8.7071C13.2441 8.31657 13.2441 7.68341 12.8536 7.29288L9.03034 3.46966L8.50001 2.93933L7.43935 3.99999L7.96968 4.53032L11.4393 7.99999L7.96968 11.4697L7.43935 12L8.50001 13.0607L9.03034 12.5303L12.8536 8.7071ZM7.85356 8.7071C8.24408 8.31657 8.24408 7.68341 7.85356 7.29288L4.03034 3.46966L3.50001 2.93933L2.43935 3.99999L2.96968 4.53032L6.43935 7.99999L2.96968 11.4697L2.43935 12L3.50001 13.0607L4.03034 12.5303L7.85356 8.7071Z" fill="currentColor"></path></svg>
                    <svg data-testid="geist-icon" height="16" stroke-linejoin="round" style="color:currentColor" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.8536 8.7071C13.2441 8.31657 13.2441 7.68341 12.8536 7.29288L9.03034 3.46966L8.50001 2.93933L7.43935 3.99999L7.96968 4.53032L11.4393 7.99999L7.96968 11.4697L7.43935 12L8.50001 13.0607L9.03034 12.5303L12.8536 8.7071ZM7.85356 8.7071C8.24408 8.31657 8.24408 7.68341 7.85356 7.29288L4.03034 3.46966L3.50001 2.93933L2.43935 3.99999L2.96968 4.53032L6.43935 7.99999L2.96968 11.4697L2.43935 12L3.50001 13.0607L4.03034 12.5303L7.85356 8.7071Z" fill="currentColor"></path></svg>
                    <svg data-testid="geist-icon" height="16" stroke-linejoin="round" style="color:currentColor" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.8536 8.7071C13.2441 8.31657 13.2441 7.68341 12.8536 7.29288L9.03034 3.46966L8.50001 2.93933L7.43935 3.99999L7.96968 4.53032L11.4393 7.99999L7.96968 11.4697L7.43935 12L8.50001 13.0607L9.03034 12.5303L12.8536 8.7071ZM7.85356 8.7071C8.24408 8.31657 8.24408 7.68341 7.85356 7.29288L4.03034 3.46966L3.50001 2.93933L2.43935 3.99999L2.96968 4.53032L6.43935 7.99999L2.96968 11.4697L2.43935 12L3.50001 13.0607L4.03034 12.5303L7.85356 8.7071Z" fill="currentColor"></path></svg>
                    <svg data-testid="geist-icon" height="16" stroke-linejoin="round" style="color:currentColor" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.8536 8.7071C13.2441 8.31657 13.2441 7.68341 12.8536 7.29288L9.03034 3.46966L8.50001 2.93933L7.43935 3.99999L7.96968 4.53032L11.4393 7.99999L7.96968 11.4697L7.43935 12L8.50001 13.0607L9.03034 12.5303L12.8536 8.7071ZM7.85356 8.7071C8.24408 8.31657 8.24408 7.68341 7.85356 7.29288L4.03034 3.46966L3.50001 2.93933L2.43935 3.99999L2.96968 4.53032L6.43935 7.99999L2.96968 11.4697L2.43935 12L3.50001 13.0607L4.03034 12.5303L7.85356 8.7071Z" fill="currentColor"></path></svg>
                </div>                
                <span class="uppercase font-light text-sm"><span class="max-lg:hidden">&nbsp;&nbsp;&nbsp;</span>[03] &nbsp;&nbsp; Projects<span class="hidden max-md:inline">&nbsp;&nbsp;&nbsp;</span></span>
            </div>
        </div>
        <div class="w-full h-[calc(100vh_-_14rem)] max-h-[900px] mt-10 z-40 relative max-lg:h-auto min-4xl:h-auto min-4xl:max-h-none max-lg:max-h-none max-md:overflow-scroll max-md:px-normal max-md:h-auto max-md:[scrollbar-width:none] max-md:[&::-webkit-scrollbar]:hidden">
            <div data-progetti-slider class="flex gap-8 items-center h-full max-lg:grid max-lg:grid-cols-2 max-lg:gap-4 max-lg:[row-gap:_2rem] max-md:flex max-md:min-w-fit min-4xl:grid min-4xl:grid-cols-3">
                <ProgettoCard 
                    title="Giovanni Brambilla"
                    description="Pittore locale. Archivio opere, biografia, mostre. Layout minimal ed elegante, focus visivo sui dipinti."
                    href="https://giovannibrambilla.com"
                    imageBack={background1}
                    imageFront={giovannibrambilla}
                    imageMobile={giovannibrambillaMobile}
                    tags={['PHP', 'GSAP']}
                    colors={['fff6ef', '1e1e1e']}
                />
                <ProgettoCard 
                    title="Centro Del Colore"
                    description="Colorificio punto di riferimento. Design semplice, focus sull'esposizione di contenuti."
                    href="https://centrodelcolore.it"
                    imageBack={background2}
                    imageFront={centrodelcolore}
                    imageMobile={centrodelcoloreMobile}
                    colors={['f5f5f5', '202020', 'ab3030', '304dab']}
                    tags={['AstroJS', 'Strapi']}
                />
                <ProgettoCard
                    title="Valtrighe Basketball"
                    description="Torneo di basket 3x3. Punteggi, classifiche, informazioni. UI giovanile, backend personalizzato."
                    href="https://valtrighebasketball.com"
                    imageBack={background3}
                    imageFront={valtrighebasketball}
                    imageMobile={valtrighebasketballMobile}
                    tags={['PHP', 'GSAP', 'COCKPIT']}
                    colors={['fff','101010','e79433']}
                />
                <ProgettoCard
                    title="Centro Pagnoncelli"
                    description="Azienda leader sul territorio. Design solido, navigazione intuitiva, focus sui servizi."
                    href="https://centropagnoncelli.it"
                    imageBack={background4}
                    imageFront={centropagnoncelli}
                    imageMobile={centropagnoncelliMobile}
                    tags={['AstroJS', 'Strapi', 'Matomo']}
                    colors={['fcfcfc', '1c1511', 'eb6d12']}
                />
                <ProgettoCard 
                    title="Chiara Iencarelli"
                    description="Landing page descrittiva per un'osteopata: obbiettivo conversioni. Design pulito e semplice."
                    href="https://chiaraiencarelli.it"
                    imageBack={background5}
                    imageFront={chiaraiencarelli}
                    imageMobile={chiaraiencarelliMobile}
                    tags={['AstroJS']}
                    colors={['fff6f0', '2c1f16', 'af7f5f']}
                />
                <ProgettoCard 
                    title="Italo Mapelli"
                    description="Portfolio digitale. Opere, biografia, visione artistica. Design monocromatico essenziale."
                    href="https://www.fratellicremonesi.it"
                    imageBack={background6}
                    imageFront={italomapelli}
                    imageMobile={italomapelliMobile}
                    tags={['Eleventy']}
                    colors={['c0ddf7', '020508']}
                    classCard="hidden min-4xl:flex max-lg:flex"
                />
            </div>
        </div>
    </div>
    <div class="w-full flex justify-center items-center gap-4 mt-16 pb-4 max-sm:flex-col">
        <button data-open-contatti>
            <Button2 text="Contattami" />
        </button>
        <a href="/progetti/">
            <Button1 text="Tutti i progetti" />
        </a>
    </div>
</section>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    import { TextPlugin } from "gsap/TextPlugin";
    gsap.registerPlugin(ScrollTrigger, TextPlugin);

    const progettiMM = gsap.matchMedia()

    progettiMM.add("(min-width: 1025px) and (max-width: 1920px)", () => {
        gsap.to('[data-progetti-slider]', {
            x: '-2728px',
            xPercent: 100,
            ease: 'none',
            scrollTrigger: {
                trigger: '[data-progetti-wrap]',
                start: 'center center',
                end: '+=1000px',
                pin: true,
                pinSpacing: true,
                scrub: true
            }
        })
    })

    gsap.from('[data-progetti-title]', {
        text: 'torpetgo',
        scrollTrigger: {
            trigger: '[data-progetti-title]',
            start: 'bottom bottom',
            end: 'center center',
            scrub: true
        }
    })
</script>